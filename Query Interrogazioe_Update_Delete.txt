

1.	Trovare gli username degli amici dell'utente con username "Marcolino"
SELECT USERNAME FROM UTENTE
WHERE ID_UTENTE IN (
		SELECT ID_UTENTE_AMICO FROM AMICI
		WHERE ID_UTENTE = (
			SELECT ID_UTENTE FROM UTENTE
			WHERE USERNAME = 'Marcolino'))


2.	Trovare tutti i videogiochi acquistati dall'utente con username "MaxBubblegum"
SELECT DISTINCT V.NOME_VIDEOGIOCO
FROM VIDEOGIOCO AS V, COMPOSIZIONE AS COMP, ORDINE AS O, UTENTE AS U, ACQUISTO AS ACQ, PAGAMENTO AS PAG
WHERE U.USERNAME = 'MaxBubblegum'
AND ACQ.ID_UTENTE = U.ID_UTENTE
AND ACQ.ID_ORDINE = O.ID_ORDINE
AND O.ID_ORDINE = PAG.ID_ORDINE
AND COMP.ID_ORDINE = O.ID_ORDINE
AND V.ID_VIDEOGIOCO = COMP.ID_VIDEOGIOCO

3.	Trovare la spesa totale dell'utente con username "MaxBubblegum"	
SELECT U.USERNAME, SUM(V.PREZZO) AS IMPORTO
FROM ORDINE AS O, UTENTE AS U, COMPOSIZIONE AS COMP, VIDEOGIOCO AS V, ACQUISTO AS ACQ, PAGAMENTO AS PAG
WHERE U.USERNAME = 'MaxBubblegum'
AND ACQ.ID_UTENTE = U.ID_UTENTE
AND ACQ.ID_ORDINE = O.ID_ORDINE
AND O.ID_ORDINE = PAG.ID_ORDINE
AND COMP.ID_ORDINE = O.ID_ORDINE
AND V.ID_VIDEOGIOCO = COMP.ID_VIDEOGIOCO
GROUP BY U.USERNAME

4.	Trovare tutti gli utenti che hanno acquistato un videogioco della categoria "FPS"
SELECT U.USERNAME
FROM UTENTE AS U, ORDINE AS O, PAGAMENTO AS PAG, VIDEOGIOCO AS V, TIPO_VIDEOGIOCO AS TIPO, CATEGORIA AS CAT, COMPOSIZIONE AS COMP, ACQUISTO AS ACQ
WHERE U.ID_UTENTE = ACQ.ID_UTENTE
AND ACQ.ID_ORDINE = O.ID_ORDINE
AND O.ID_ORDINE = PAG.ID_ORDINE
AND COMP.ID_ORDINE = O.ID_ORDINE
AND V.ID_VIDEOGIOCO = COMP.ID_VIDEOGIOCO
AND V.ID_VIDEOGIOCO = TIPO.ID_VIDEOGIOCO
AND TIPO.ID_CATEGORIA = CAT.ID_CATEGORIA
AND CAT.NOME_CATEGORIA = 'FPS'
GROUP BY U.USERNAME

5.	Quantità di videogiochi venduti di ciascun videogioco col relativo nome
SELECT V.NOME_VIDEOGIOCO AS VIDEOGIOCO, SUM(COMP.QUANTITA) AS COPIE_VENDUTE
FROM VIDEOGIOCO AS V, COMPOSIZIONE AS COMP, ORDINE AS ORD, PAGAMENTO AS PAG
WHERE V.ID_VIDEOGIOCO = COMP.ID_VIDEOGIOCO
AND COMP.ID_ORDINE = ORD.ID_ORDINE
AND PAG.ID_ORDINE = ORD.ID_ORDINE 
GROUP BY V.ID_VIDEOGIOCO




6.	Selezionare tutti i giochi che sono stati spediti con relativo nome utente e data di chi li ha acquistati
SELECT V.NOME_VIDEOGIOCO AS VIDEOGIOCO, PAG.DATA AS DATA_SPEDIZIONE, U.USERNAME AS UTENTE 
FROM VIDEOGIOCO AS V, COMPOSIZIONE AS COMP, ORDINE AS ORD, PAGAMENTO AS PAG, SPEDIZIONE AS SHIP, UTENTE AS U, ACQUISTO AS ACQ
WHERE U.ID_UTENTE = ACQ.ID_UTENTE
AND ACQ.ID_ORDINE = ORD.ID_ORDINE
AND PAG.ID_ORDINE = ORD.ID_ORDINE
AND SHIP.ID_ORDINE = ORD.ID_ORDINE
AND COMP.ID_ORDINE = ORD.ID_ORDINE
AND V.ID_VIDEOGIOCO = COMP.ID_VIDEOGIOCO 
GROUP BY V.ID_VIDEOGIOCO, PAG.DATA, U.USERNAME

7.	Posizione di ogni gioco nel magazzino
SELECT V.NOME_VIDEOGIOCO AS NOME_VIDEOGIOCO, V.COPIE_FISICHE AS COPIE_VIDEOGIOCO, R.N_RIPIANO AS RIPIANO, R.N_SCAFFALE AS SCAFFALE, MAG.ID_MAGAZZINO AS MAGAZZINO
FROM VIDEOGIOCO AS V, RIPIANO AS R, MAGAZZINO AS MAG 
WHERE V.ID_VIDEOGIOCO = R.ID_VIDEOGIOCO
AND R.ID_MAGAZZINO = MAG.ID_MAGAZZINO

8.	Tutti i giochi di Maxbubblegum in libreria
SELECT U.USERNAME AS GIOCATORI, V.NOME_VIDEOGIOCO AS TITOLO_IN_LIBRERIA
FROM VIDEOGIOCO AS V, LIBRERIA AS LIB, UTENTE AS U
WHERE U.USERNAME = 'MaxBubblegum'
AND LIB.ID_UTENTE = U.ID_UTENTE
AND LIB.ID_VIDEOGIOCO = V.ID_VIDEOGIOCO

9.	Giochi con voto >= 4
SELECT V.NOME_VIDEOGIOCO, R.VOTO
FROM VIDEOGIOCO AS V, RECENSIONE AS R
WHERE V.ID_VIDEOGIOCO = R.ID_VIDEOGIOCO
AND R.VOTO >= 4

10.	Giochi in comune fra più utenti
SELECT DISTINCT V.NOME_VIDEOGIOCO, U1.USERNAME AS UTENTE_1, U2.USERNAME AS UTENTE_2
FROM VIDEOGIOCO AS V, UTENTE AS U1, UTENTE AS U2, LIBRERIA AS C1, LIBRERIA AS C2
WHERE U1.ID_UTENTE = C1.ID_UTENTE
AND U2.ID_UTENTE = C2.ID_UTENTE
AND V.ID_VIDEOGIOCO = C1.ID_VIDEOGIOCO
AND V.ID_VIDEOGIOCO = C2.ID_VIDEOGIOCO
AND U1.ID_UTENTE != U2.ID_UTENTE
GROUP BY V.NOME_VIDEOGIOCO, U1.USERNAME, U2.USERNAME


11.	Quante volte è stato acquistato “Dark Souls”
SELECT COUNT (V.NOME_VIDEOGIOCO)
FROM VIDEOGIOCO AS V, ORDINE AS ORD, COMPOSIZIONE AS COMP, PAGAMENTO AS PAG
WHERE V.NOME_VIDEOGIOCO = 'Dark Souls'
AND V.ID_VIDEOGIOCO = COMP.ID_VIDEOGIOCO
AND COMP.ID_ORDINE = ORD.ID_ORDINE
AND ORD.ID_ORDINE = PAG.ID_ORDINE



12.	Categorie di videogiochi e videogiochi associati
SELECT CAT.NOME_CATEGORIA, VID.NOME_VIDEOGIOCO
FROM CATEGORIA AS CAT, TIPO_VIDEOGIOCO AS TIP, VIDEOGIOCO AS VID
WHERE VID.ID_VIDEOGIOCO = TIP.ID_VIDEOGIOCO
AND TIP.ID_CATEGORIA = CAT.ID_CATEGORIA


DELETE

1.	Eliminazione di un account
KILLATO MAX BUBBLEGUM
DELETE FROM UTENTE
WHERE ID_UTENTE = '34003'
2.	Eliminazione di un videogioco
DELETE FROM VIDEOGIOCO
WHERE NOME_VIDEOGIOCO = 'Diablo'

UPDATE

1.	Aggiornamento valori relativi ad un videogioco
UPADTE VIDEOGIOCO
SET COPIE_FISICHE = 30, PREZZO = PREZZO + 5
WHERE NOME_VIDEOGIOCO = ‘COD’

